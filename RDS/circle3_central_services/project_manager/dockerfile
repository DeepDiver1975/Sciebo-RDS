FROM python:3.6-alpine
EXPOSE 8080

# set the base installation, requirements are not changed often
RUN apk update && apk add build-base

WORKDIR /app
ADD ./requirements.txt ./
RUN pip install -r requirements.txt

# download yaml file for better usability and reproducable behaviour
RUN apk add curl

<<<<<<< HEAD
ENV OPENAPI_FILEPATH_EXTERNAL   "https://raw.githubusercontent.com/Sciebo-RDS/Sciebo-RDS/master/RDS/circle2_use_cases/exporter/use-case_exporter.yml"
ENV OPENAPI_FILEPATH            "exporter.yml"
=======
ENV OPENAPI_FILEPATH_EXTERNAL   "https://raw.githubusercontent.com/Sciebo-RDS/Sciebo-RDS/master/RDS/circle3_central_services/project_manager/central-service_project-manager.yml"
ENV OPENAPI_FILEPATH            "project_manager.yml"
>>>>>>> master
RUN curl -X GET "$OPENAPI_FILEPATH_EXTERNAL" -o "$OPENAPI_FILEPATH"

# now add everything else, which changes often
ADD src ./

ENTRYPOINT [ "python", "server.py" ]
